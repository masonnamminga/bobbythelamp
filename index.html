<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bobby the Lamp</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <!-- Fontawesome 5 -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css"
        integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
    <!-- Personal CSS -->
    <link rel="stylesheet" href="./css/styles.css">
</head>

<body style="background-color: rgb(220, 220, 220);">
    <main class="container mt-5" id="page-container">
        <h4><span class="badge bg-primary rounded-pill">V2</span></h4>
        <h1 style="font-weight: bolder;" id="bobby">BOBBY THE LAMP</h1>
        <div class="d-flex flex-column justify-items-center align-content-center mx-auto w-50 pt-3">
            <p>Tap on a color to change Bobby's appearance.</p>
            <a href="#" style="display: none;" target="_blank">
                Learn how Bobby was made
                <i class="fas fa-external-link-alt"></i>
            </a>
            <!-- Remove style="display: none;" when you want to have it visible, and change the # in the href to your link.
                 target="_blank" opens the link in a new tab. -->
        </div>
        <div class="d-flex flex-column justify-items-center align-content-center mx-auto">
            <div class="m-1"><a class="btn btn-primary" id="red" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">RED</a></div>
            <div class="m-1"><a class="btn btn-primary" id="orange" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">ORANGE</a></div>
            <div class="m-1"><a class="btn btn-primary" id="yellow" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">YELLOW</a></div>
            <div class="m-1"><a class="btn btn-primary" id="green" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">GREEN</a></div>
            <div class="m-1"><a class="btn btn-primary" id="blue" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">BLUE</a></div>
            <div class="m-1"><a class="btn btn-primary" id="violet" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">VIOLET</a></div>
            <div class="m-1">
                <a class="btn btn-primary" id="rainbowa" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">BREATHE RAINBOW</a>
            </div>
            <div class="m-1">
                <a class="btn btn-primary" id="rainbowb" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">FLASH RAINBOW</a>
            </div>
            <div class="m-1"><a class="btn btn-primary" id="white" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">WHITE</a></div>
            <div class="m-1"><a class="btn btn-primary" id="off" onclick="clicker(this)" onmouseover="hoverer(this)"
                    onmouseleave="hoverernt(this)">OFF</a></div>
            <section id="brightnessActions">
                <h4>BRIGHTNESS</h4>
                <div class="m-1"><a class="btn btn-primary" id="n100" onclick="clicker(this)"
                        onmouseover="hoverer(this)" onmouseleave="hoverernt(this)">100%</a></div>
                <div class="m-1"><a class="btn btn-primary" id="n75" onclick="clicker(this)" onmouseover="hoverer(this)"
                        onmouseleave="hoverernt(this)">75%</a></div>
                <div class="m-1"><a class="btn btn-primary" id="n50" onclick="clicker(this)" onmouseover="hoverer(this)"
                        onmouseleave="hoverernt(this)">50%</a></div>
                <div class="m-1"><a class="btn btn-primary" id="n25" onclick="clicker(this)" onmouseover="hoverer(this)"
                        onmouseleave="hoverernt(this)">25%</a></div>
            </section>


        </div>
        <div id="credits" class="flex-column flex-sm-row">
            <div>
                <p><i>Mason Namminga:</i></p>
                <p>Bobby's Production</p>
                <a target="_blank" href="https://instagram.com/masonnamminga">Instagram</a>
            </div>
            <div>
                <p><i>Jackson Graddon</i></p>
                <p>Website Development</p>
                <a target="_blank" href="https://jackgraddon.page/">Website</a>
            </div>
        </div>
    </main>
    <div id="no">
        <h1 style="font-weight: bolder; font-size: 84pt;">NO</h1>
    </div>
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollToPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/MotionPathPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/TextPlugin.min.js"></script>
    <script>
        let body = document.querySelector('body');
        let title = document.getElementById('bobby');
        let canChange = true, opacity = 1;

        function clicker(elem) {
            if (!canChange) {
                gsap.to('#no', { display: 'flex' })
                gsap.timeline({ repeat: 2 })
                    .fromTo('#page-container', 0.05, { x: 0, y: 0 }, { x: 10, y: 0 })
                    .to('#page-container', 0.05, { x: -10, y: 0 })
                    .to('#page-container', 0.05, { x: 0, y: 0 });
                gsap.to('#no', { display: 'none' })
                return;
            }
            let color = elem.id, event;
            // console.log(color);
            switch (color) {
                case "red":
                    title.innerHTML = "BOBBY IS RED";
                    body.style.backgroundColor = '#B23331';
                    event = '01'
                    break;
                case "orange":
                    title.innerHTML = "BOBBY IS ORANGE";
                    body.style.backgroundColor = '#B37F32';
                    event = '02'
                    break;
                case "yellow":
                    title.innerHTML = "BOBBY IS YELLOW";
                    body.style.backgroundColor = '#D0C33A';
                    event = '03'
                    break;
                case "green":
                    title.innerHTML = "BOBBY IS GREEN";
                    body.style.backgroundColor = '#35B031';
                    event = '04'
                    break;
                case "blue":
                    title.innerHTML = "BOBBY IS BLUE";
                    body.style.backgroundColor = '#314DB0';
                    event = '05'
                    break;
                case "violet":
                    title.innerHTML = "BOBBY IS VIOLET";
                    body.style.backgroundColor = '#AC31B0';
                    event = '06'
                    break;
                case "white":
                    title.innerHTML = "BOBBY IS WHITE";
                    body.style.backgroundColor = '#DCDCDC';
                    event = '07'
                    break;
                case "off":
                    title.innerHTML = "BOBBY IS OFF";
                    body.style.backgroundColor = '#1D1D1D';
                    event = '08'
                    break;
                case "n25":
                    title.innerHTML = "BOBBY IS DARKER";
                    // if (body.style.backgroundColor.includes(',', 15)) {
                    //     if (body.style.backgroundColor.includes('.')) {
                    //         body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 7) + ', 0.25)';
                    //     } else {
                    //         body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 4) + ', 0.25)';
                    //     }
                    // } else {
                    //     body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 1) + ', 0.25)';
                    // }
                    event = '09'
                    opacity = 0.25;
                    break;
                case "n50":
                    title.innerHTML = "BOBBY IS DARK";
                    event = '10'
                    opacity = 0.51; // .51 so it doesn't auto compress to .5 (breaks code)
                    break;
                case "n75":
                    title.innerHTML = "BOBBY IS DIM";
                    // if (body.style.backgroundColor.includes(',', 15)) {
                    //     if (body.style.backgroundColor.includes('.')) {
                    //         body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 7) + ', 0.75)';
                    //     } else {
                    //         body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 4) + ', 0.75)';
                    //     }
                    // } else {
                    //     body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 1) + ', 0.75)';
                    // }
                    event = '11'
                    opacity = 0.75;
                    break;
                case "n100":
                    title.innerHTML = "BOBBY IS FULl POWER";
                    // if (body.style.backgroundColor.includes(',', 15)) { // Checks if there is alpha in the page background color
                    //     if (body.style.backgroundColor.includes('.')) {
                    //         body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 7) + ', 1)';
                    //     } else {
                    //         body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 4) + ', 1)';
                    //     }
                    // } else {
                    //     body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 1) + ', 1)';
                    // }
                    event = '12'
                    opacity = 1;
                    break;
                case "rainbowa":
                    title.innerHTML = "BOBBY IS BREATHING THE RAINBOW";
                    event = '13'
                    break;
                case "rainbowb":
                    title.innerHTML = "BOBBY IS FLASHING THE RAINBOW";
                    event = '14'
                    break;
                case "usetheidofthebuttonhere":
                    title.innerHTML = "BOBBY IS ACTION";
                    body.style.backgroundColor = 'if color applies to action, set a color here. if not, set whatever color.';
                    event = '00' // Whatever the digits are after the '&monkey=eventtrigger' is in the URL
                    break;
            }

            if (body.style.backgroundColor.includes(',', 15)) {
                if (body.style.backgroundColor.includes('.')) {
                    body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 7) + `, ${opacity})`;
                } else {
                    body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 4) + `, ${opacity})`;
                }
            } else {
                body.style.backgroundColor = body.style.backgroundColor.slice(0, body.style.backgroundColor.length - 1) + `, ${opacity})`;
            }

            if (color == 'yellow' || color == "white" || color == "n25" || color == "n50" || color == "n75") {
                body.style.color = 'black';
                body.style.opacity = 1;
                body.className = '';
            } else if (color == 'rainbowa' || color == "rainbowb") {
                body.className = 'rainbowBG';
                body.style.color = 'white';
                body.style.opacity = 1;
                document.getElementById('brightnessActions').classList.remove('nonclickable');
            } else if (color == 'off') {
                body.style.color = 'gray';
                body.style.opacity = 0.5;
                body.className = '';
                document.getElementById('brightnessActions').classList.add('nonclickable');
            } else {
                body.className = '';
                body.style.color = 'white';
                body.style.opacity = 1;
                document.getElementById('brightnessActions').classList.remove('nonclickable');
            }

            // let options = {
            //     method: "POST",
            //     mode: 'no-cors',
            //     headers: {
            //         "Content-type": "application/json; charset=utf-8",
            //     },
            //     body: JSON.stringify({ payload: `{"access_token":"4178712fbe407e30e3373775020db8d0","secret_token":"7430de5ed7a2b2adc1fe8a380f5b0292","monkey":"{{eventtrigger${event}}}"}` }),
            // }

            // let url = 'https://api.voicemonkey.io/trigger'
            let url = 'https://api.voicemonkey.io/trigger?access_token=4178712fbe407e30e3373775020db8d0&secret_token=7430de5ed7a2b2adc1fe8a380f5b0292&monkey=eventtrigger' + event;

            // fetch(url, options)
            //     .then((response) => {
            //         if (!response.ok) {
            //             throw Error(response.statusText);
            //         } else {
            //             console.log('Color changed to ' + color)
            //         }
            //     })
            //     .catch((err) => {
            //         console.log(
            //             `${err.name}: ${err.message}`
            //         );
            //     });
            // var poster = window.open(url, '', 'width=0,height=0,resizable=no');
            // poster.blur();
            // poster.resizeTo(0, 0);
            // poster.moveTo(window.screen.availWidth + 1000, window.screen.availHeight + 1000);
            // window.focus();
            document.getElementById('trigger').src = url;
            canChange = false;
            setTimeout(() => {
                // poster.close();
                setTimeout(() => {
                    canChange = true;
                }, 200)
            }, 1000)
        }
    </script>
    <iframe id="trigger" src="" width="0" height="0"></iframe>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"></script>
<script>
    function hoverer(elem) {
        gsap.to(elem, { padding: "10px 0px", duration: 1, ease: "elastic.out(2, 0.5)" });
    }
    function hoverernt(elem) {
        gsap.to(elem, { padding: "8px 0px", duration: 1, ease: "elastic.out(2, 0.5)" });
    }
</script>


</html>